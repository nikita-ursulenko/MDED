{% block content %}
{% set table_title = function('get_field', 'table_main_title') %}
{% set table_description = function('get_field', 'table_description_text') %}
	<section id="sprijin" class="py-20 bg-white">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="text-center mb-16">
				<h2 class="text-5xl font-bold text-gray-900 mb-8">Sprijin financiar diferențiat pe regiuni</h2>
				<p class="text-xl text-gray-600 max-w-4xl mx-auto">
				Valoarea ajutorului de stat acordat prin acest program variază în funcție de localitatea în care se face investiția și de dimensiunea companiei. Astfel, se încurajează dezvoltarea economică în toate regiunile țării, oferind un sprijin mai mare acolo unde nevoia este mai mare. 
				</p>
			</div>

			<div class="bg-white rounded-xl shadow-lg overflow-hidden mb-16">
				<div class="bg-gov-blue text-white px-8 py-6">
					<h3 class="text-2xl font-bold">{{ fields.table_main_title }}</h3>
				</div>

				<div class="overflow-x-auto">
					{# Fetch the main title and description fields #}
				

				<div class="table-wrapper"> {# Added a wrapper div for general table section if needed #}

					<table class="w-full">
						<thead class="bg-gov-light-blue">
							<tr>
								<th class="px-8 py-4 text-left text-lg font-semibold text-gov-blue">Tip de întreprindere</th>
								<th class="px-8 py-4 text-center text-lg font-semibold text-gov-blue">
									<div class="flex items-center justify-center space-x-2">
										<span>Majoritatea raioanelor</span>
										<div class="w-4 h-4 bg-green-500 rounded"></div>
									</div>
								</th>
								<th class="px-8 py-4 text-center text-lg font-semibold text-gov-blue">
									<div class="flex items-center justify-center space-x-2">
										<span>Municipiul Chișinău</span>
										<div class="w-4 h-4 bg-red-500 rounded"></div>
									</div>
								</th>
							</tr>
						</thead>
						<tbody class="divide-y divide-gray-200">
							{# --- Row 1: Întreprindere mică --- #}
							{% set small_districts = function('get_field', 'small_enterprise_most_districts') %}
							{% set small_chisinau = function('get_field', 'small_enterprise_chisinau') %}

							{# Only render this row if both percentage fields have values #}
							{% if small_districts and small_chisinau %}
								<tr class="hover:bg-gray-50">
									<td class="px-8 py-6 text-base font-medium text-gray-900">Întreprindere mică</td>
									<td class="px-8 py-6 text-center">
										<div class="text-2xl font-bold text-green-600">{{ small_districts }}</div>
									</td>
									<td class="px-8 py-6 text-center">
										<div class="text-2xl font-bold text-red-600">{{ small_chisinau }}</div>
									</td>
								</tr>
							{% endif %}

							{# --- Row 2: Întreprindere mijlocie --- #}
							{% set medium_districts = function('get_field', 'medium_enterprise_most_districts') %}
							{% set medium_chisinau = function('get_field', 'medium_enterprise_chisinau') %}

							{# Only render this row if both percentage fields have values #}
							{% if medium_districts and medium_chisinau %}
								<tr class="hover:bg-gray-50">
									<td class="px-8 py-6 text-base font-medium text-gray-900">Întreprindere mijlocie</td>
									<td class="px-8 py-6 text-center">
										<div class="text-2xl font-bold text-green-600">{{ medium_districts }}</div>
									</td>
									<td class="px-8 py-6 text-center">
										<div class="text-2xl font-bold text-red-600">{{ medium_chisinau }}</div>
									</td>
								</tr>
							{% endif %}

							{# --- Row 3: Întreprindere mare --- #}
							{% set large_districts = function('get_field', 'large_enterprise_most_districts') %}
							{% set large_chisinau = function('get_field', 'large_enterprise_chisinau') %}

							{# Only render this row if both percentage fields have values #}
							{% if large_districts and large_chisinau %}
								<tr class="hover:bg-gray-50">
									<td class="px-8 py-6 text-base font-medium text-gray-900">Întreprindere mare</td>
									<td class="px-8 py-6 text-center">
										<div class="text-2xl font-bold text-green-600">{{ large_districts }}</div>
									</td>
									<td class="px-8 py-6 text-center">
										<div class="text-2xl font-bold text-red-600">{{ large_chisinau }}</div>
									</td>
								</tr>
							{% endif %}
						</tbody>
					</table>
				</div>
				</div>
			</div>

			<div class="mb-16">
    {# Main Section Title #}
    {% set main_title = function('get_field', 'fss_main_title') %}
    {% if main_title %}
        <h3 class="text-3xl font-bold text-center text-gray-900 mb-8">{{ main_title }}</h3>
    {% endif %}

    {# Budget Block #}
    {% set budget_title = function('get_field', 'fss_budget_title') %}
    {% set budget_mdl = function('get_field', 'fss_budget_mdl') %}
    {% set budget_euro = function('get_field', 'fss_budget_euro') %}
    {% set budget_note = function('get_field', 'fss_budget_note') %}

    {% if budget_title or budget_mdl or budget_euro or budget_note %}
        <div class="bg-gov-blue text-white rounded-xl p-8 mb-12 text-center">
            <div class="max-w-3xl mx-auto">
                {% if budget_title %}<h4 class="text-2xl font-bold mb-4">{{ budget_title }}</h4>{% endif %}
                {% if budget_mdl %}<div class="text-5xl font-bold mb-2">{{ budget_mdl }}</div>{% endif %}
                {% if budget_euro %}<div class="text-xl opacity-90 mb-4">{{ budget_euro }}</div>{% endif %}
                {% if budget_note %}<p class="text-lg opacity-90">{{ budget_note|raw }}</p>{% endif %} {# Use raw for wpautop #}
            </div>
        </div>
    {% endif %}

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {# Card 1: Sprijin de stat #}
        {% set card1_percentage = function('get_field', 'fss_card1_percentage') %}
        {% set card1_title = function('get_field', 'fss_card1_title') %}
        {% set card1_main_text = function('get_field', 'fss_card1_main_text') %}
        {% set card1_point1 = function('get_field', 'fss_card1_point1') %}
        {% set card1_point2 = function('get_field', 'fss_card1_point2') %}
        {# Add more points if you defined them in PHP: {% set card1_point3 = function('get_field', 'fss_card1_point3') %} #}

        {% if card1_percentage or card1_title or card1_main_text or card1_point1 or card1_point2 %}
            <div class="bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-8">
                <div class="text-center mb-6">
                    <div class="relative w-24 h-24 mx-auto mb-4">
                        <svg class="w-24 h-24 transform -rotate-90" viewbox="0 0 100 100">
                            <circle cx="50" cy="50" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                            <circle cx="50" cy="50" r="40" stroke="#8b5cf6" stroke-width="8" fill="none" stroke-dasharray="251.2" stroke-dashoffset="100.48" stroke-linecap="round"/>
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            {% if card1_percentage %}<span class="text-2xl font-bold text-purple-600">{{ card1_percentage }}</span>{% endif %}
                        </div>
                    </div>
                    {% if card1_title %}<h4 class="text-xl font-bold text-purple-800">{{ card1_title }}</h4>{% endif %}
                </div>
                <div class="text-center text-base text-purple-700">
                    {% if card1_main_text %}<p class="mb-4">{{ card1_main_text|raw }}</p>{% endif %} {# Use raw for bold text #}
                    <div class="space-y-2 text-sm">
                        {% if card1_point1 %}
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-purple-600 rounded-full mt-2 flex-shrink-0"></div>
                                <span>{{ card1_point1 }}</span>
                            </div>
                        {% endif %}
                        {% if card1_point2 %}
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-purple-600 rounded-full mt-2 flex-shrink-0"></div>
                                <span>{{ card1_point2 }}</span>
                            </div>
                        {% endif %}
                        {# Add more points here if you added them in PHP #}
                        {# {% if card1_point3 %}
                            <div class="flex items-start space-x-2">
                                <div class="w-2 h-2 bg-purple-600 rounded-full mt-2 flex-shrink-0"></div>
                                <span>{{ card1_point3 }}</span>
                            </div>
                        {% endif %} #}
                    </div>
                </div>
            </div>
        {% endif %}

        {# Card 2: Grant nerambursabil #}
        {% set card2_percentage = function('get_field', 'fss_card2_percentage') %}
        {% set card2_title = function('get_field', 'fss_card2_title') %}
        {% set card2_point1 = function('get_field', 'fss_card2_point1') %}
        {% set card2_point2 = function('get_field', 'fss_card2_point2') %}
        {% set card2_point3 = function('get_field', 'fss_card2_point3') %}

        {% if card2_percentage or card2_title or card2_point1 or card2_point2 or card2_point3 %}
            <div class="bg-green-50 border-2 border-green-200 rounded-xl p-8">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewbox="0 0 20 20">
                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"/>
                            <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    {% if card2_percentage %}<div class="text-4xl font-bold text-green-600 mb-2">{{ card2_percentage }}</div>{% endif %}
                    {% if card2_title %}<h4 class="text-xl font-bold text-green-800">{{ card2_title }}</h4>{% endif %}
                </div>
                <div class="space-y-3 text-sm text-green-800">
                    {% if card2_point1 %}
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"></div>
                            <span>{{ card2_point1 }}</span>
                        </div>
                    {% endif %}
                    {% if card2_point2 %}
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"></div>
                            <span>{{ card2_point2 }}</span>
                        </div>
                    {% endif %}
                    {% if card2_point3 %}
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"></div>
                            <span>{{ card2_point3 }}</span>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endif %}

        {# Card 3: Facilitate fiscală #}
        {% set card3_percentage = function('get_field', 'fss_card3_percentage') %}
        {% set card3_title = function('get_field', 'fss_card3_title') %}
        {% set card3_point1 = function('get_field', 'fss_card3_point1') %}
        {% set card3_point2 = function('get_field', 'fss_card3_point2') %}
        {% set card3_point3 = function('get_field', 'fss_card3_point3') %}

        {% if card3_percentage or card3_title or card3_point1 or card3_point2 or card3_point3 %}
            <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-8">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-gov-blue rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewbox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    {% if card3_percentage %}<div class="text-4xl font-bold text-gov-blue mb-2">{{ card3_percentage }}</div>{% endif %}
                    {% if card3_title %}<h4 class="text-xl font-bold text-gov-blue">{{ card3_title }}</h4>{% endif %}
                </div>
                <div class="space-y-3 text-sm text-gov-blue">
                    {% if card3_point1 %}
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-gov-blue rounded-full mt-2 flex-shrink-0"></div>
                            <span>{{ card3_point1 }}</span>
                        </div>
                    {% endif %}
                    {% if card3_point2 %}
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-gov-blue rounded-full mt-2 flex-shrink-0"></div>
                            <span>{{ card3_point2 }}</span>
                        </div>
                    {% endif %}
                    {% if card3_point3 %}
                        <div class="flex items-start space-x-3">
                            <div class="w-2 h-2 bg-gov-blue rounded-full mt-2 flex-shrink-0"></div>
                            <span>{{ card3_point3 }}</span>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    </div>

    {# Advantages Block #}
    {% set advantages_title = function('get_field', 'fss_advantages_title') %}
    {% set advantages_text = function('get_field', 'fss_advantages_text') %}

    {% if advantages_title or advantages_text %}
        <div class="mt-12 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg p-6">
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                    <svg class="h-6 w-6 text-yellow-600" fill="currentColor" viewbox="0 0 20 20">
                        <path fill-rule="evenodd" d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <div>
                    {% if advantages_title %}<h4 class="text-lg font-semibold text-yellow-800 mb-2">{{ advantages_title }}</h4>{% endif %}
					{% if advantages_text %}<div class="text-base text-yellow-700">{{ advantages_text|raw }}</div>{% endif %}
                </div>
            </div>
        </div>
    {% endif %}
</div>
		</div>
	</section>
{% endblock %}
